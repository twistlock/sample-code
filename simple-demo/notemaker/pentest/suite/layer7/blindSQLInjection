#!/bin/bash

websvc=$(getNginxURL)
[[ $? -ne 0 ]] && echo $websvc && exit $?

attackString="1' and 1=1 UNION SELECT 1;- -"
echo "------------   BLIND SQL INJECTION ATTACK ---------------"
echo "-- launching blind SQLInj attack on http://$websvc"

curl -s -o responses/blindsql-response.html -d "$attackString" http://$websvc
success=$(grep -c POST responses/blindsql-response.html)
if [ "$success" == "1" ]; then
  echo "   >> blind sql injection attack succeeded"
  echo "!-------  BLIND SQL INJECTION ATTACK SUCCESSFUL ----------"
else
  echo "   >> blind sql injection attack prevented"
  echo "--------   BLIND SQL INJECTION ATTACK FAILED   ----------"
fi
echo





